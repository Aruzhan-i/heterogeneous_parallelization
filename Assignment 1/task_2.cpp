#include <iostream>   // Подключаем библиотеку для ввода и вывода данных (cout, endl)
#include <cstdlib>    // Подключаем библиотеку для работы с rand(), srand() и system()
#include <ctime>      // Подключаем библиотеку для работы с текущим временем (time)
#include <chrono>     // Подключаем библиотеку для измерения времени выполнения алгоритма

using namespace std;      // Используем стандартное пространство имён std
using namespace chrono;   // Используем пространство имён chrono для таймеров

int main() {              // Главная функция программы, с неё начинается выполнение

    // Принудительно переключаем кодировку консоли Windows на UTF-8
    // Это необходимо для корректного отображения русского текста
    system("chcp 65001 > nul");

    // Объявляем константу — размер массива (1 000 000 элементов)
    const int SIZE = 1000000;

    // Выводим сообщение о запуске программы
    cout << "Программа запущена." << endl;

    // Сообщаем о выделении памяти под массив
    cout << "Выделяем память под массив из " << SIZE << " целых чисел." << endl;

    // Динамически выделяем память под массив целых чисел
    int* arr = new int[SIZE];

    // Инициализируем генератор случайных чисел текущим временем
    srand(time(nullptr));

    // Сообщаем о начале заполнения массива
    cout << "Заполняем массив случайными числами..." << endl;

    // Заполняем массив случайными целыми числами от 1 до 1 000 000
    for (int i = 0; i < SIZE; i++) {      // Цикл проходит по всем элементам массива
        arr[i] = rand() % 1000000 + 1;    // Генерируем и записываем случайное число
    }

    // Сообщаем об успешном заполнении массива
    cout << "Массив успешно заполнен." << endl;

    // Инициализируем переменную минимального значения первым элементом массива
    int minVal = arr[0];

    // Инициализируем переменную максимального значения первым элементом массива
    int maxVal = arr[0];

    // Сообщаем о начале поиска минимального и максимального элементов
    cout << "Начинаем последовательный поиск минимального и максимального элементов..." << endl;

    // Фиксируем время начала выполнения алгоритма
    auto start = high_resolution_clock::now();

    // Последовательный алгоритм поиска минимума и максимума
    for (int i = 1; i < SIZE; i++) {   // Проходим по массиву, начиная со второго элемента

        // Если текущий элемент меньше минимального — обновляем минимум
        if (arr[i] < minVal)
            minVal = arr[i];

        // Если текущий элемент больше максимального — обновляем максимум
        if (arr[i] > maxVal)
            maxVal = arr[i];
    }

    // Фиксируем время окончания выполнения алгоритма
    auto end = high_resolution_clock::now();

    // Вычисляем время выполнения алгоритма в миллисекундах
    auto duration = duration_cast<milliseconds>(end - start);

    // Выводим минимальный элемент массива
    cout << "Минимальный элемент массива: " << minVal << endl;

    // Выводим максимальный элемент массива
    cout << "Максимальный элемент массива: " << maxVal << endl;

    // Выводим время выполнения алгоритма
    cout << "Время выполнения алгоритма: " << duration.count() << " мс." << endl;

    // Сообщаем об освобождении динамически выделенной памяти
    cout << "Освобождаем динамически выделенную память." << endl;

    // Освобождаем память, выделенную под массив
    delete[] arr;

    // Сообщаем о корректном завершении программы
    cout << "Программа завершена корректно." << endl;

    // Возвращаем 0, что означает успешное завершение программы
    return 0;
}
