#include <iostream>    // Ввод и вывод
#include <cstdlib>     // rand, srand
#include <ctime>       // time
#include <windows.h>   // WinAPI для работы с кодировкой консоли


using namespace std;  // Используем стандартное пространство имён

int main() {          // Главная функция программы
    
    // Устанавливаем UTF-8 кодировку для ввода и вывода консоли
    SetConsoleOutputCP(CP_UTF8); // для ввода
    SetConsoleCP(CP_UTF8); // для вывода


    const int SIZE = 50000;  // Размер массива

    // Сообщение о начале работы программы
    wcout << "Программа запущена." << endl;

    // Динамическое выделение памяти
    wcout << "Выделяем динамическую память под массив из "
         << SIZE << " целых чисел." << endl;
    int* arr = new int[SIZE];

    // Инициализация генератора случайных чисел
    srand(time(nullptr));
    wcout << "Генератор случайных чисел инициализирован." << endl;

    // Переменная для хранения суммы элементов массива
    long long sum = 0;

    // Заполнение массива случайными числами
    wcout << "Заполняем массив случайными числами от 1 до 100..." << endl;
    for (int i = 0; i < SIZE; i++) {
        arr[i] = rand() % 100 + 1;
        sum += arr[i];
    }

    // Сообщение об успешном заполнении
    wcout << "Массив успешно заполнен." << endl;

    // Вычисление среднего значения
    double average = static_cast<double>(sum) / SIZE;

    // Вывод результата
    wcout << "Среднее значение элементов массива: "
         << average << endl;

    // Освобождение памяти
    wcout << "Освобождаем выделенную динамическую память." << endl;
    delete[] arr;

    // Завершение программы
    wcout << "Программа завершена корректно." << endl;

    return 0;  // Успешное завершение программы
}
